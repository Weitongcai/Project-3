<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Yelp Data Visualization</title>
    <style>
        /* CSS styles for the header and sidebar */
        header {
            background-color: #f0f28b;
            color: #160739;
            padding: 70px;
            text-align: center;
        }

        h1 {
            margin: 10;
            font-size: 64px;
        }

        .sidebar {
            width: 150px;
            background-color: #cd4c35;
            padding: 10px;
        }

        .sidebar-section {
            margin-bottom: 20px;
        }

        h2 {
            margin: 0;
            padding: 10px 0;
            font-size: 30px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <header>
        <h1>YELP DATA VISUALIZATION</h1>
    </header>

    <div class="sidebar">
        <div class="sidebar-section">
            <h2 onclick="showDashboard()">Dashboard</h2>
            <!-- Add content for the dashboard menu -->
        </div>
        <div class="sidebar-section">
            <h2 onclick="showRating()">Rating</h2>
            <!-- Add content for the rating menu -->
        </div>
        <div class="sidebar-section">
            <h2 onclick="showMap()">Map</h2>
            <!-- Add content for the map menu -->
        </div>
    </div>

    <!-- Add the chart container -->
    <div id="chart-container"></div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
        function showDashboard() {
            // Implement the logic to show the dashboard
            console.log('Show Dashboard');
        }

        function showRating() {
            // Implement the logic to show the rating
            console.log('Show Rating');
        }

        function showMap() {
            // Implement the logic to show the map
            console.log('Show Map');
        }

        // Global Utility Variables
        var data = {};

        // Global HTML selectors
        var inputSelector = d3.select("#selDataset");
        var panelDemoInfo = d3.select("#sample-metadata");

        function titleCase(str) {
          return str.toLowerCase().split(' ').map(function(word) {
            return (word.charAt(0).toUpperCase() + word.slice(1));
          }).join(' ');
        }

        // Populate the Demographic Info panel
        function populateDemoInfo(idNum) {
          // Log a change
          console.log("Pop: " + idNum);

          // Just grab the one ID we want
          var metadataFilter = data.metadata.filter(item => item["id"] == idNum);
          console.log(`metaFilter length: ${metadataFilter.length}`);

          // Clear out the data first
          panelDemoInfo.html("");

          // Fill it back in
          Object.entries(metadataFilter[0]).forEach(([key, value]) => { var titleKey = titleCase(key); panelDemoInfo.append("h6").text(`${titleKey}: ${value}`) });
        }

        // Object Compare Function
        function compareValues(key, order = 'asc') {
          return function innerSort(a, b) {
            if (!a.hasOwnProperty(key) || !b.hasOwnProperty(key)) {
              // property doesn't exist on either object
              return 0;
            }
            const varA = (typeof a[key] === 'string')
              ? a[key].toUpperCase() : a[key];
            const varB = (typeof b[key] === 'string')
              ? b[key].toUpperCase() : b[key];
            let comparison = 0;
            if (varA > varB) {
              comparison = 1;
            } else if (varA < varB) {
              comparison = -1;
            }
            return (
              (order === 'desc') ? (comparison * -1) : comparison
            );
          };
        }

        // Load the JSON data
        d3.json("Data/sample.json").then(function(jsonData) {
            data = jsonData;
        });
    </script>

    <script src="Startcode/logic.js"></script>
</body>
</html>






